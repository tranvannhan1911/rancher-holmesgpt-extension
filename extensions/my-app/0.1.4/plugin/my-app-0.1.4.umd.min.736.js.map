{"version":3,"file":"my-app-0.1.4.umd.min.736.js","mappings":"sZA+BMA,EAAU,yD,+CAThB,MAAMC,GAAQC,EAAAA,EAAAA,MAGRC,EAAeF,GAAOG,QAAQC,UAAY,MAC1CC,EAAaL,GAAOG,QAAQG,GAC5BC,EAAYP,GAAOG,QAAQI,WAAa,UACxCC,EAAUR,GAAOG,QAAQK,SAAW,QACpCC,EAAUT,GAAOG,QAAQM,SAAW,GAIpCC,GAAWC,EAAAA,EAAAA,KAAI,IACfC,GAAUD,EAAAA,EAAAA,MAAI,GACdE,GAAQF,EAAAA,EAAAA,KAAI,MACZG,EAAK,IAAIC,EAAAA,EAETC,GAAgBC,EAAAA,EAAAA,UAAS,IAEtBf,EAAagB,OAAO,GAAGC,cAAgBjB,EAAakB,MAAM,IAGnEC,eAAeC,IACbV,EAAQW,OAAQ,EAChBV,EAAMU,MAAQ,KACdb,EAASa,MAAQ,GAEjB,IAEE,MAAMC,EAAU,CACdhB,UACAD,YACAE,UACAL,SAAUF,EACV,CAACA,GAAeG,GAGZoB,QAAYC,MAAM3B,EAAS,CAC/B4B,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,OAAQ,aACRC,MAAO,GAAGjB,EAAcO,gCACxBW,YAAa,wCAAwChC,kGAA6Gc,EAAcO,qBAChLC,UACAW,QAAS,CAAC,EACVC,oBAAoB,MAIlBC,QAAaZ,EAAIa,OACjBC,EAAYF,GAAMG,SAGtB9B,EAASa,MADPgB,EACezB,EAAG2B,OAAOF,GAEVzB,EAAG2B,OAAO,KAAKzB,EAAcO,+CAElD,CAAE,MAAOmB,GACPC,EAAQ9B,MAAM6B,GACd7B,EAAMU,MAAQ,uCAChB,CAAE,QACAX,EAAQW,OAAQ,CAClB,CACF,C,OAEAqB,EAAAA,EAAAA,WAAUtB,G,2BAxFRuB,EAAAA,EAAAA,oBAaM,MAbNC,EAaM,EAZJC,EAAAA,EAAAA,oBAAsC,WAAAC,EAAAA,EAAAA,iBAA/BhC,EAAAO,OAAgB,aAAU,GAEAb,EAAAa,Q,kBAAjCsB,EAAAA,EAAAA,oBAEM,MAFNI,EAEM,EADJF,EAAAA,EAAAA,oBAAyB,OAApBG,UAAQxC,EAAAa,OAAQ,OAAA4B,O,+BAGZvC,EAAAW,Q,kBAAXsB,EAAAA,EAAAA,oBAAkF,MAAAO,EAA9D,iBAAaJ,EAAAA,EAAAA,iBAAGhC,EAAAO,MAAc8B,eAAgB,aAAU,K,+BACjExC,EAAAU,Q,kBAAXsB,EAAAA,EAAAA,oBAAoD,MAApDS,EAAgC,OAAGN,EAAAA,EAAAA,iBAAGnC,EAAAU,OAAK,K,gCAE3CwB,EAAAA,EAAAA,oBAES,UAFAQ,QAAOjC,EAAiBkC,SAAU5C,EAAAW,OAAS,sBAEpD,EAAAkC,K,yBCPJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,uFCLIC,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOvD,GAAI,k1BAAm1B,KAE53B,c,wBCJA,IAAIwD,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,kBAAZF,IAAsBA,EAAU,CAAC,CAACD,EAAOvD,GAAIwD,EAAS,MAC7DA,EAAQG,SAAQJ,EAAOK,QAAUJ,EAAQG,QAE5C,IAAIE,EAAM,WACGA,EAAI,WAAYL,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,G","sources":["webpack://my-app-0.1.4/./components/DiagnosisTabComponent.vue","webpack://my-app-0.1.4/./components/DiagnosisTabComponent.vue?b152","webpack://my-app-0.1.4/./components/DiagnosisTabComponent.vue?eea6","webpack://my-app-0.1.4/./components/DiagnosisTabComponent.vue?5f43"],"sourcesContent":["<template>\n  <div class=\"holmesgpt-page\">\n    <h2>{{ resourceLabel }} Diagnosis</h2>\n\n    <div class=\"diagnosis-box\" v-if=\"response\">\n      <div v-html=\"response\" />\n    </div>\n\n    <div v-if=\"loading\">üîÑ Analyzing {{ resourceLabel.toLowerCase() }} issues...</div>\n    <div v-if=\"error\" class=\"error\">‚ö†Ô∏è {{ error }}</div>\n\n    <button @click=\"fetchDiagnosis\" :disabled=\"loading\">\n      Refresh Diagnosis\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport MarkdownIt from 'markdown-it';\n\nconst route = useRoute();\n\n// Defensive checks for route.params\nconst resourceType = route?.params?.resource || 'pod';\nconst resourceId = route?.params?.id;\nconst namespace = route?.params?.namespace || 'default';\nconst cluster = route?.params?.cluster || 'local';\nconst product = route?.params?.product || '';\n\nconst API_URL = 'https://holmes.192.223.13.246.sslip.io/api/investigate';\n\nconst response = ref('');\nconst loading = ref(false);\nconst error = ref(null);\nconst md = new MarkdownIt();\n\nconst resourceLabel = computed(() => {\n  // Capitalize first letter\n  return resourceType.charAt(0).toUpperCase() + resourceType.slice(1);\n});\n\nasync function fetchDiagnosis() {\n  loading.value = true;\n  error.value = null;\n  response.value = '';\n\n  try {\n    // Construct subject with dynamic resource key\n    const subject = {\n      cluster,\n      namespace,\n      product,\n      resource: resourceType,\n      [resourceType]: resourceId, // e.g. pod: \"error-pod\", deployment: \"my-deploy\"\n    };\n\n    const res = await fetch(API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        source: 'Kubernetes',\n        title: `${resourceLabel.value} Troubleshooting Request`,\n        description: `Check if there are any issues in the ${resourceType} logs, events, or status within the last 24 hours. If no issues are found, just respond with \"${resourceLabel.value} is healthy\".`,\n        subject,\n        context: {},\n        include_tool_calls: true\n      })\n    });\n\n    const data = await res.json();\n    const diagnosis = data?.analysis;\n\n    if (diagnosis) {\n      response.value = md.render(diagnosis);\n    } else {\n      response.value = md.render(`‚úÖ ${resourceLabel.value} is healthy. No recent issues detected.`);\n    }\n  } catch (err) {\n    console.error(err);\n    error.value = '‚ùå Failed to connect to HolmesGPT API.';\n  } finally {\n    loading.value = false;\n  }\n}\n\nonMounted(fetchDiagnosis);\n</script>\n\n<style scoped>\n.holmesgpt-page {\n  padding: 1.5rem;\n  font-family: sans-serif;\n}\n\n.diagnosis-box {\n  background: #f6f8fa;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n}\n\n.diagnosis-box h3 {\n  margin-bottom: 0.5rem;\n}\n\n.diagnosis-box :deep(h1) {\n  font-size: 1.3rem;\n  margin: 1rem 0 0.5rem;\n}\n\n.diagnosis-box :deep(h2) {\n  font-size: 1.2rem;\n  margin: 0.9rem 0 0.4rem;\n}\n\n.diagnosis-box :deep(h3) {\n  font-size: 1.1rem;\n  margin: 0.8rem 0 0.3rem;\n}\n\n.diagnosis-box :deep(h4) {\n  font-size: 1rem;\n  font-weight: 600;\n  margin: 0.6rem 0 0.3rem;\n}\n\n.error {\n  color: red;\n  margin-top: 1rem;\n}\n\nbutton {\n  margin-top: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #0275d8;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\nbutton:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n</style>","import script from \"./DiagnosisTabComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DiagnosisTabComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DiagnosisTabComponent.vue?vue&type=style&index=0&id=50ec7e9a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-50ec7e9a\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".holmesgpt-page[data-v-50ec7e9a]{padding:1.5rem;font-family:sans-serif}.diagnosis-box[data-v-50ec7e9a]{background:#f6f8fa;border:1px solid #ccc;border-radius:8px;padding:1rem;margin-top:1rem}.diagnosis-box h3[data-v-50ec7e9a]{margin-bottom:.5rem}.diagnosis-box[data-v-50ec7e9a] h1{font-size:1.3rem;margin:1rem 0 .5rem}.diagnosis-box[data-v-50ec7e9a] h2{font-size:1.2rem;margin:.9rem 0 .4rem}.diagnosis-box[data-v-50ec7e9a] h3{font-size:1.1rem;margin:.8rem 0 .3rem}.diagnosis-box[data-v-50ec7e9a] h4{font-size:1rem;font-weight:600;margin:.6rem 0 .3rem}.error[data-v-50ec7e9a]{color:red}.error[data-v-50ec7e9a],button[data-v-50ec7e9a]{margin-top:1rem}button[data-v-50ec7e9a]{padding:.5rem 1rem;background-color:#0275d8;color:#fff;border:none;border-radius:5px;cursor:pointer}button[data-v-50ec7e9a]:disabled{background-color:#ccc;cursor:not-allowed}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./DiagnosisTabComponent.vue?vue&type=style&index=0&id=50ec7e9a&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"09131219\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["API_URL","route","useRoute","resourceType","params","resource","resourceId","id","namespace","cluster","product","response","ref","loading","error","md","MarkdownIt","resourceLabel","computed","charAt","toUpperCase","slice","async","fetchDiagnosis","value","subject","res","fetch","method","headers","body","JSON","stringify","source","title","description","context","include_tool_calls","data","json","diagnosis","analysis","render","err","console","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","_hoisted_2","innerHTML","_hoisted_3","_hoisted_4","toLowerCase","_hoisted_5","onClick","disabled","_hoisted_6","__exports__","___CSS_LOADER_EXPORT___","push","module","content","__esModule","default","locals","exports","add"],"sourceRoot":""}