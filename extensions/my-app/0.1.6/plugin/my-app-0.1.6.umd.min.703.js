(("undefined"!==typeof self?self:this)["webpackChunkmy_app_0_1_6"]=("undefined"!==typeof self?self:this)["webpackChunkmy_app_0_1_6"]||[]).push([[703],{49703:function(e,a,o){"use strict";o.r(a),o.d(a,{default:function(){return h}});var r=o(9274),t=o(37069),s=o(28441),n=o(4364);const d={class:"holmesgpt-page"},i={key:0,class:"diagnosis-box"},l=["innerHTML"],c={key:1},u={key:2,class:"error"},p=["disabled"],m="https://holmes.192.223.13.246.sslip.io/api/investigate";var f={__name:"DiagnosisTabComponent",setup(e){const a=(0,t.lq)();function o(e){const a=e.match(/explorer\/(.*?)\/(.*?)\//);return a?{resourceType:a[1],resourceId:a[2]}:{}}let f=a?.params?.resource||a?.query?.resource,v=a?.params?.id||a?.query?.id,g=a?.params?.namespace||a?.query?.namespace||"default",h=a?.params?.cluster||a?.query?.cluster||"local",b=a?.params?.product||a?.query?.product||"";if(!f||!v){const e=o(a.path);f=f||e.resourceType||"pod",v=v||e.resourceId}const y=(0,r.ref)(""),k=(0,r.ref)(!1),_=(0,r.ref)(null),x=new s.A,w=(0,r.computed)(()=>f.charAt(0).toUpperCase()+f.slice(1));async function C(){k.value=!0,_.value=null,y.value="";try{const e={cluster:h,namespace:g,product:b,resource:f,[f]:v};n.log("Diagnosis subject:",e);const a=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:"Kubernetes",title:`${w.value} Troubleshooting Request`,description:`Check if there are any issues in the ${f} logs, events, or status within the last 24 hours. If no issues are found, just respond with "${w.value} is healthy".`,subject:e,context:{},include_tool_calls:!0})}),o=await a.json(),r=o?.analysis;y.value=r?x.render(r):x.render(`‚úÖ ${w.value} is healthy. No recent issues detected.`)}catch(e){n.error(e),_.value="‚ùå Failed to connect to HolmesGPT API."}finally{k.value=!1}}return(0,r.onMounted)(C),(e,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(w.value)+" Diagnosis",1),y.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createElementVNode)("div",{innerHTML:y.value},null,8,l)])):(0,r.createCommentVNode)("",!0),k.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",c,"üîÑ Analyzing "+(0,r.toDisplayString)(w.value.toLowerCase())+" issues...",1)):(0,r.createCommentVNode)("",!0),_.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",u,"‚ö†Ô∏è "+(0,r.toDisplayString)(_.value),1)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("button",{onClick:C,disabled:k.value}," Refresh Diagnosis ",8,p)]))}},v=(o(83736),o(47433));const g=(0,v.A)(f,[["__scopeId","data-v-1d9f6e6d"]]);var h=g},56507:function(e,a,o){"use strict";o.r(a);var r=o(36758),t=o.n(r),s=o(40935),n=o.n(s),d=n()(t());d.push([e.id,".holmesgpt-page[data-v-1d9f6e6d]{padding:1.5rem;font-family:sans-serif}.diagnosis-box[data-v-1d9f6e6d]{background:#f6f8fa;border:1px solid #ccc;border-radius:8px;padding:1rem;margin-top:1rem}.diagnosis-box h3[data-v-1d9f6e6d]{margin-bottom:.5rem}.diagnosis-box[data-v-1d9f6e6d] h1{font-size:1.3rem;margin:1rem 0 .5rem}.diagnosis-box[data-v-1d9f6e6d] h2{font-size:1.2rem;margin:.9rem 0 .4rem}.diagnosis-box[data-v-1d9f6e6d] h3{font-size:1.1rem;margin:.8rem 0 .3rem}.diagnosis-box[data-v-1d9f6e6d] h4{font-size:1rem;font-weight:600;margin:.6rem 0 .3rem}.error[data-v-1d9f6e6d]{color:red}.error[data-v-1d9f6e6d],button[data-v-1d9f6e6d]{margin-top:1rem}button[data-v-1d9f6e6d]{padding:.5rem 1rem;background-color:#0275d8;color:#fff;border:none;border-radius:5px;cursor:pointer}button[data-v-1d9f6e6d]:disabled{background-color:#ccc;cursor:not-allowed}",""]),a["default"]=d},83736:function(e,a,o){var r=o(56507);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var t=o(74825).A;t("ae4465aa",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=my-app-0.1.6.umd.min.703.js.map