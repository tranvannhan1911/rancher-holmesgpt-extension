{"version":3,"file":"my-app-0.1.8.umd.min.12.js","mappings":"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","sources":["webpack://my-app-0.1.8/./components/DiagnosisTabComponent.vue?b6b7","webpack://my-app-0.1.8/./components/DiagnosisTabComponent.vue","webpack://my-app-0.1.8/./components/DiagnosisTabComponent.vue?b152","webpack://my-app-0.1.8/./components/DiagnosisTabComponent.vue?edbb"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".holmesgpt-page[data-v-5e68d333]{padding:1.5rem;font-family:sans-serif}.diagnosis-box[data-v-5e68d333]{background:#f6f8fa;border:1px solid #ccc;border-radius:8px;padding:1rem;margin-top:1rem}.diagnosis-box h3[data-v-5e68d333]{margin-bottom:.5rem}.diagnosis-box[data-v-5e68d333] h1{font-size:1.3rem;margin:1rem 0 .5rem}.diagnosis-box[data-v-5e68d333] h2{font-size:1.2rem;margin:.9rem 0 .4rem}.diagnosis-box[data-v-5e68d333] h3{font-size:1.1rem;margin:.8rem 0 .3rem}.diagnosis-box[data-v-5e68d333] h4{font-size:1rem;font-weight:600;margin:.6rem 0 .3rem}.error[data-v-5e68d333]{color:red}.error[data-v-5e68d333],button[data-v-5e68d333]{margin-top:1rem}button[data-v-5e68d333]{padding:.5rem 1rem;background-color:#0275d8;color:#fff;border:none;border-radius:5px;cursor:pointer}button[data-v-5e68d333]:disabled{background-color:#ccc;cursor:not-allowed}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<template>\n  <div class=\"holmesgpt-page\">\n    <h2>{{ resourceLabel }} Diagnosis</h2>\n\n    <div class=\"diagnosis-box\" v-if=\"response\">\n      <div v-html=\"response\" />\n    </div>\n\n    <div v-if=\"loading\">üîÑ Analyzing {{ resourceLabel.toLowerCase() }} issues...</div>\n    <div v-if=\"error\" class=\"error\">‚ö†Ô∏è {{ error }}</div>\n\n    <button @click=\"fetchDiagnosis\" :disabled=\"loading\">\n      Refresh Diagnosis\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport MarkdownIt from 'markdown-it';\n\nconst route = useRoute();\n\n// Helper to extract resource info from path if not in params/query\nfunction extractResourceFromPath(path) {\n  // Example path: /dashboard/c/local/explorer/apps.deployment/test-1/notification#diagnosis-tab\n  // Extract resourceType: apps.deployment, resourceId: test-1\n  const match = path.match(/explorer\\/(.*?)\\/(.*?)\\//);\n  if (match) {\n    return {\n      resourceType: match[1],\n      resourceId: match[2]\n    };\n  }\n  return {};\n}\n\n// Try to get resource info from params, query, or path\nlet resourceType = route?.params?.resource || route?.query?.resource;\nlet resourceId = route?.params?.id || route?.query?.id;\nlet namespace = route?.params?.namespace || route?.query?.namespace || 'default';\nlet cluster = route?.params?.cluster || route?.query?.cluster || 'local';\nlet product = route?.params?.product || route?.query?.product || '';\n\n// Defensive check for route.path\nlet routePath = '';\nif (route && route.path) {\n  routePath = route.path;\n} else if (typeof window !== 'undefined') {\n  routePath = window.location.pathname;\n}\n\nif (!resourceType || !resourceId) {\n  const extracted = extractResourceFromPath(routePath);\n  resourceType = resourceType || extracted.resourceType || 'pod';\n  resourceId = resourceId || extracted.resourceId;\n}\n\nconst API_URL = 'https://holmes.192.223.13.246.sslip.io/api/investigate';\n\nconst response = ref('');\nconst loading = ref(false);\nconst error = ref(null);\nconst md = new MarkdownIt();\n\nconst resourceLabel = computed(() => {\n  // Capitalize first letter\n  return resourceType.charAt(0).toUpperCase() + resourceType.slice(1);\n});\n\nasync function fetchDiagnosis() {\n  loading.value = true;\n  error.value = null;\n  response.value = '';\n\n  try {\n    // Construct subject with dynamic resource key\n    const subject = {\n      cluster,\n      namespace,\n      product,\n      resource: resourceType,\n      [resourceType]: resourceId, // e.g. pod: \"error-pod\", deployment: \"my-deploy\"\n    };\n    console.log('Diagnosis subject:', subject); // Debug log\n\n    const res = await fetch(API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        source: 'Kubernetes',\n        title: `${resourceLabel.value} Troubleshooting Request`,\n        description: `Check if there are any issues in the ${resourceType} logs, events, or status within the last 24 hours. If no issues are found, just respond with \"${resourceLabel.value} is healthy\".`,\n        subject,\n        context: {},\n        include_tool_calls: true\n      })\n    });\n\n    const data = await res.json();\n    const diagnosis = data?.analysis;\n\n    if (diagnosis) {\n      response.value = md.render(diagnosis);\n    } else {\n      response.value = md.render(`‚úÖ ${resourceLabel.value} is healthy. No recent issues detected.`);\n    }\n  } catch (err) {\n    console.error(err);\n    error.value = '‚ùå Failed to connect to HolmesGPT API.';\n  } finally {\n    loading.value = false;\n  }\n}\n\nonMounted(fetchDiagnosis);\n</script>\n\n<style scoped>\n.holmesgpt-page {\n  padding: 1.5rem;\n  font-family: sans-serif;\n}\n\n.diagnosis-box {\n  background: #f6f8fa;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n}\n\n.diagnosis-box h3 {\n  margin-bottom: 0.5rem;\n}\n\n.diagnosis-box :deep(h1) {\n  font-size: 1.3rem;\n  margin: 1rem 0 0.5rem;\n}\n\n.diagnosis-box :deep(h2) {\n  font-size: 1.2rem;\n  margin: 0.9rem 0 0.4rem;\n}\n\n.diagnosis-box :deep(h3) {\n  font-size: 1.1rem;\n  margin: 0.8rem 0 0.3rem;\n}\n\n.diagnosis-box :deep(h4) {\n  font-size: 1rem;\n  font-weight: 600;\n  margin: 0.6rem 0 0.3rem;\n}\n\n.error {\n  color: red;\n  margin-top: 1rem;\n}\n\nbutton {\n  margin-top: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #0275d8;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\nbutton:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n</style>","import script from \"./DiagnosisTabComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DiagnosisTabComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DiagnosisTabComponent.vue?vue&type=style&index=0&id=5e68d333&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5e68d333\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./DiagnosisTabComponent.vue?vue&type=style&index=0&id=5e68d333&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9edc4bb2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["___CSS_LOADER_EXPORT___","push","module","id","API_URL","route","useRoute","extractResourceFromPath","path","match","resourceType","resourceId","params","resource","query","namespace","cluster","product","routePath","window","location","pathname","extracted","response","ref","loading","error","md","MarkdownIt","resourceLabel","computed","charAt","toUpperCase","slice","async","fetchDiagnosis","value","subject","console","log","res","fetch","method","headers","body","JSON","stringify","source","title","description","context","include_tool_calls","data","json","diagnosis","analysis","render","err","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","_hoisted_2","innerHTML","_hoisted_3","_hoisted_4","toLowerCase","_hoisted_5","onClick","disabled","_hoisted_6","__exports__","content","__esModule","default","locals","exports","add"],"sourceRoot":""}