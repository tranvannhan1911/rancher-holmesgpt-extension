(("undefined"!==typeof self?self:this)["webpackChunkmy_app_0_2_0"]=("undefined"!==typeof self?self:this)["webpackChunkmy_app_0_2_0"]||[]).push([[736],{48287:function(e,a,o){"use strict";o.r(a);var t=o(36758),r=o.n(t),s=o(40935),n=o.n(s),i=n()(r());i.push([e.id,".holmesgpt-page[data-v-4850afe2]{padding:1.5rem;font-family:sans-serif}.diagnosis-box[data-v-4850afe2]{background:#f6f8fa;border:1px solid #ccc;border-radius:8px;padding:1rem;margin-top:1rem}.diagnosis-box h3[data-v-4850afe2]{margin-bottom:.5rem}.diagnosis-box[data-v-4850afe2] h1{font-size:1.3rem;margin:1rem 0 .5rem}.diagnosis-box[data-v-4850afe2] h2{font-size:1.2rem;margin:.9rem 0 .4rem}.diagnosis-box[data-v-4850afe2] h3{font-size:1.1rem;margin:.8rem 0 .3rem}.diagnosis-box[data-v-4850afe2] h4{font-size:1rem;font-weight:600;margin:.6rem 0 .3rem}.error[data-v-4850afe2]{color:red}.error[data-v-4850afe2],button[data-v-4850afe2]{margin-top:1rem}button[data-v-4850afe2]{padding:.5rem 1rem;background-color:#0275d8;color:#fff;border:none;border-radius:5px;cursor:pointer}button[data-v-4850afe2]:disabled{background-color:#ccc;cursor:not-allowed}",""]),a["default"]=i},58880:function(e,a,o){var t=o(48287);t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);var r=o(74825).A;r("60501092",t,!0,{sourceMap:!1,shadowMode:!1})},80736:function(e,a,o){"use strict";o.r(a),o.d(a,{default:function(){return g}});var t=o(9274),r=o(37069),s=o(28441),n=o(4364);const i={class:"holmesgpt-page"},c={key:0,class:"diagnosis-box"},l=["innerHTML"],d={key:1},u={key:2,class:"error"},p=["disabled"],m="https://holmes.192.223.13.246.sslip.io/api/investigate";var f={__name:"DiagnosisTabComponent",setup(e){const a=(0,r.lq)();function o(e){const a=e.match(/\/dashboard\/c\/(.*?)\/explorer\/(.*?)\/(.*?)\/(.*?)(?:\/|$)/);return a?{cluster:a[1],resourceType:a[2],namespace:a[3],resourceId:a[4]}:{}}let f=a?.params?.resource||a?.query?.resource,v=a?.params?.id||a?.query?.id,h=a?.params?.namespace||a?.query?.namespace,g=a?.params?.cluster||a?.query?.cluster,b=a?.params?.product||a?.query?.product||"",y="";if(a&&a.path?y=a.path:"undefined"!==typeof window&&(y=window.location.pathname),!f||!v||!h||!g){const e=o(y);f=f||e.resourceType||"pod",v=v||e.resourceId||"resource",h=h||e.namespace||"test-1",g=g||e.cluster||"local"}const k=(0,t.ref)(""),_=(0,t.ref)(!1),w=(0,t.ref)(null),x=new s.A,C=(0,t.computed)(()=>f.charAt(0).toUpperCase()+f.slice(1));async function T(){_.value=!0,w.value=null,k.value="";try{const e={cluster:g,namespace:h,product:b,resource:f,name:v,[f]:v};n.log("Diagnosis subject:",e);const a=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:"Kubernetes",title:`${C.value} Troubleshooting Request`,description:`Check if there are any issues in the ${f} logs, events, or status within the last 24 hours. If no issues are found, just respond with "${C.value} is healthy".`,subject:e,context:{},include_tool_calls:!0})}),o=await a.json(),t=o?.analysis;k.value=t?x.render(t):x.render(`‚úÖ ${C.value} is healthy. No recent issues detected.`)}catch(e){n.error(e),w.value="‚ùå Failed to connect to HolmesGPT API."}finally{_.value=!1}}return(0,t.onMounted)(T),(e,a)=>((0,t.openBlock)(),(0,t.createElementBlock)("div",i,[(0,t.createElementVNode)("h2",null,(0,t.toDisplayString)(C.value)+" Diagnosis",1),k.value?((0,t.openBlock)(),(0,t.createElementBlock)("div",c,[(0,t.createElementVNode)("div",{innerHTML:k.value},null,8,l)])):(0,t.createCommentVNode)("",!0),_.value?((0,t.openBlock)(),(0,t.createElementBlock)("div",d,"üîÑ Analyzing "+(0,t.toDisplayString)(C.value.toLowerCase())+" issues...",1)):(0,t.createCommentVNode)("",!0),w.value?((0,t.openBlock)(),(0,t.createElementBlock)("div",u,"‚ö†Ô∏è "+(0,t.toDisplayString)(w.value),1)):(0,t.createCommentVNode)("",!0),(0,t.createElementVNode)("button",{onClick:T,disabled:_.value}," Refresh Diagnosis ",8,p)]))}},v=(o(58880),o(47433));const h=(0,v.A)(f,[["__scopeId","data-v-4850afe2"]]);var g=h}}]);
//# sourceMappingURL=my-app-0.2.0.umd.min.736.js.map