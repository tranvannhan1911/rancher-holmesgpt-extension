{"version":3,"file":"my-app-0.2.0.umd.min.736.js","mappings":"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","sources":["webpack://my-app-0.2.0/./components/DiagnosisTabComponent.vue?3fbb","webpack://my-app-0.2.0/./components/DiagnosisTabComponent.vue?a28e","webpack://my-app-0.2.0/./components/DiagnosisTabComponent.vue","webpack://my-app-0.2.0/./components/DiagnosisTabComponent.vue?b152"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".holmesgpt-page[data-v-4850afe2]{padding:1.5rem;font-family:sans-serif}.diagnosis-box[data-v-4850afe2]{background:#f6f8fa;border:1px solid #ccc;border-radius:8px;padding:1rem;margin-top:1rem}.diagnosis-box h3[data-v-4850afe2]{margin-bottom:.5rem}.diagnosis-box[data-v-4850afe2] h1{font-size:1.3rem;margin:1rem 0 .5rem}.diagnosis-box[data-v-4850afe2] h2{font-size:1.2rem;margin:.9rem 0 .4rem}.diagnosis-box[data-v-4850afe2] h3{font-size:1.1rem;margin:.8rem 0 .3rem}.diagnosis-box[data-v-4850afe2] h4{font-size:1rem;font-weight:600;margin:.6rem 0 .3rem}.error[data-v-4850afe2]{color:red}.error[data-v-4850afe2],button[data-v-4850afe2]{margin-top:1rem}button[data-v-4850afe2]{padding:.5rem 1rem;background-color:#0275d8;color:#fff;border:none;border-radius:5px;cursor:pointer}button[data-v-4850afe2]:disabled{background-color:#ccc;cursor:not-allowed}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./DiagnosisTabComponent.vue?vue&type=style&index=0&id=4850afe2&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"60501092\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<template>\n  <div class=\"holmesgpt-page\">\n    <h2>{{ resourceLabel }} Diagnosis</h2>\n\n    <div class=\"diagnosis-box\" v-if=\"response\">\n      <div v-html=\"response\" />\n    </div>\n\n    <div v-if=\"loading\">üîÑ Analyzing {{ resourceLabel.toLowerCase() }} issues...</div>\n    <div v-if=\"error\" class=\"error\">‚ö†Ô∏è {{ error }}</div>\n\n    <button @click=\"fetchDiagnosis\" :disabled=\"loading\">\n      Refresh Diagnosis\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport MarkdownIt from 'markdown-it';\n\nconst route = useRoute();\n\n// Helper to extract resource info from path if not in params/query\nfunction extractResourceFromPath(path) {\n  // Example path: /dashboard/c/local/explorer/apps.deployment/test-1/frontend#diagnosis-tab\n  // Extract cluster, resourceType, namespace, resourceId\n  const match = path.match(/\\/dashboard\\/c\\/(.*?)\\/explorer\\/(.*?)\\/(.*?)\\/(.*?)(?:\\/|$)/);\n  if (match) {\n    return {\n      cluster: match[1],\n      resourceType: match[2],\n      namespace: match[3],\n      resourceId: match[4]\n    };\n  }\n  return {};\n}\n\n// Try to get resource info from params, query, or path\nlet resourceType = route?.params?.resource || route?.query?.resource;\nlet resourceId = route?.params?.id || route?.query?.id;\nlet namespace = route?.params?.namespace || route?.query?.namespace;\nlet cluster = route?.params?.cluster || route?.query?.cluster;\nlet product = route?.params?.product || route?.query?.product || '';\n\n// Defensive check for route.path\nlet routePath = '';\nif (route && route.path) {\n  routePath = route.path;\n} else if (typeof window !== 'undefined') {\n  routePath = window.location.pathname;\n}\n\nif (!resourceType || !resourceId || !namespace || !cluster) {\n  const extracted = extractResourceFromPath(routePath);\n  resourceType = resourceType || extracted.resourceType || 'pod';\n  resourceId = resourceId || extracted.resourceId || 'resource';\n  namespace = namespace || extracted.namespace || 'test-1';\n  cluster = cluster || extracted.cluster || 'local';\n}\n\nconst API_URL = 'https://holmes.192.223.13.246.sslip.io/api/investigate';\n\nconst response = ref('');\nconst loading = ref(false);\nconst error = ref(null);\nconst md = new MarkdownIt();\n\nconst resourceLabel = computed(() => {\n  // Capitalize first letter\n  return resourceType.charAt(0).toUpperCase() + resourceType.slice(1);\n});\n\nasync function fetchDiagnosis() {\n  loading.value = true;\n  error.value = null;\n  response.value = '';\n\n  try {\n    // Construct subject with dynamic resource key\n    const subject = {\n      cluster,\n      namespace,\n      product,\n      resource: resourceType,\n      name: resourceId,\n      [resourceType]: resourceId, // e.g. pod: \"error-pod\", deployment: \"my-deploy\"\n    };\n    console.log('Diagnosis subject:', subject); // Debug log\n\n    const res = await fetch(API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        source: 'Kubernetes',\n        title: `${resourceLabel.value} Troubleshooting Request`,\n        description: `Check if there are any issues in the ${resourceType} logs, events, or status within the last 24 hours. If no issues are found, just respond with \"${resourceLabel.value} is healthy\".`,\n        subject,\n        context: {},\n        include_tool_calls: true\n      })\n    });\n\n    const data = await res.json();\n    const diagnosis = data?.analysis;\n\n    if (diagnosis) {\n      response.value = md.render(diagnosis);\n    } else {\n      response.value = md.render(`‚úÖ ${resourceLabel.value} is healthy. No recent issues detected.`);\n    }\n  } catch (err) {\n    console.error(err);\n    error.value = '‚ùå Failed to connect to HolmesGPT API.';\n  } finally {\n    loading.value = false;\n  }\n}\n\nonMounted(fetchDiagnosis);\n</script>\n\n<style scoped>\n.holmesgpt-page {\n  padding: 1.5rem;\n  font-family: sans-serif;\n}\n\n.diagnosis-box {\n  background: #f6f8fa;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n}\n\n.diagnosis-box h3 {\n  margin-bottom: 0.5rem;\n}\n\n.diagnosis-box :deep(h1) {\n  font-size: 1.3rem;\n  margin: 1rem 0 0.5rem;\n}\n\n.diagnosis-box :deep(h2) {\n  font-size: 1.2rem;\n  margin: 0.9rem 0 0.4rem;\n}\n\n.diagnosis-box :deep(h3) {\n  font-size: 1.1rem;\n  margin: 0.8rem 0 0.3rem;\n}\n\n.diagnosis-box :deep(h4) {\n  font-size: 1rem;\n  font-weight: 600;\n  margin: 0.6rem 0 0.3rem;\n}\n\n.error {\n  color: red;\n  margin-top: 1rem;\n}\n\nbutton {\n  margin-top: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #0275d8;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\nbutton:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n</style>","import script from \"./DiagnosisTabComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DiagnosisTabComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DiagnosisTabComponent.vue?vue&type=style&index=0&id=4850afe2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4850afe2\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","push","module","id","content","__esModule","default","locals","exports","add","API_URL","route","useRoute","extractResourceFromPath","path","match","cluster","resourceType","namespace","resourceId","params","resource","query","product","routePath","window","location","pathname","extracted","response","ref","loading","error","md","MarkdownIt","resourceLabel","computed","charAt","toUpperCase","slice","async","fetchDiagnosis","value","subject","name","console","log","res","fetch","method","headers","body","JSON","stringify","source","title","description","context","include_tool_calls","data","json","diagnosis","analysis","render","err","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","_hoisted_2","innerHTML","_hoisted_3","_hoisted_4","toLowerCase","_hoisted_5","onClick","disabled","_hoisted_6","__exports__"],"sourceRoot":""}